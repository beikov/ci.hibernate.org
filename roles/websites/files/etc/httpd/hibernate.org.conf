<VirtualHost *:80>
  ServerName hibernate.org
  ServerAdmin admin+hibernateorg@hibernate.org
  ProxyRequests Off

  # Redirecting *.dtd to HTTPS causes issues in older versions of
  # Hibernate ORM that actually download DTDs.
  # Presumably those issues are caused by a bug in Xerces.
  # See https://hibernate.atlassian.net/browse/HHH-15094
  # See https://hibernate.atlassian.net/browse/HBX-2307
  RedirectMatch permanent .*(?<!\.dtd)$ https://hibernate.org$0

  AddOutputFilterByType DEFLATE text/html text/plain text/xml application/x-javascript text/css

  ErrorDocument 404 /404.html

  DocumentRoot /var/www/hibernate.org
  <Directory /var/www/hibernate.org>
    AllowOverride None
  </Directory>

  LogLevel warn

  Header set Content-Security-Policy "default-src 'none'; form-action 'none'; base-uri 'none'; frame-ancestors 'none'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://hibernate.atlassian.net www.google-analytics.com https://code.jquery.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.googleapis.com https://cdn.jsdelivr.net; img-src 'self' www.google-analytics.com www.google-analytics.com https://www.gravatar.com https://static.jboss.org; font-src data: https://fonts.gstatic.com https://fonts.googleapis.com  https://cdn.jsdelivr.net; frame-src https://hibernate.atlassian.net"
  Header set X-Frame-Options DENY
  Header set X-Content-Type-Options nosniff
  Header set X-XSS-Protection "1; mode=block"
  Header set Referrer-Policy: strict-origin-when-cross-origin
  Header set Strict-Transport-Security: "max-age=15768000; includeSubDomains; preload"

  RewriteEngine On
  Include conf.d/hibernate.org-rewriterules.confpart
</VirtualHost>
<IfFile /etc/letsencrypt/live/hibernate.org/cert.pem>
<IfModule mod_ssl.c>
<VirtualHost *:443>
  ServerName hibernate.org
  ServerAdmin admin+hibernateorg@hibernate.org
  ProxyRequests Off

  SSLCertificateFile /etc/letsencrypt/live/hibernate.org/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/hibernate.org/privkey.pem
  Include /etc/letsencrypt/options-ssl-apache.conf
  SSLCertificateChainFile /etc/letsencrypt/live/hibernate.org/chain.pem

  AddOutputFilterByType DEFLATE text/html text/plain text/xml application/x-javascript text/css

  ErrorDocument 404 /404.html

  DocumentRoot /var/www/hibernate.org
  <Directory /var/www/hibernate.org>
    AllowOverride None
  </Directory>

  LogLevel warn

  Header set Content-Security-Policy "default-src 'none'; form-action 'none'; base-uri 'none'; frame-ancestors 'none'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://hibernate.atlassian.net www.google-analytics.com https://code.jquery.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.googleapis.com https://cdn.jsdelivr.net; img-src 'self' www.google-analytics.com www.google-analytics.com https://www.gravatar.com https://static.jboss.org; font-src data: https://fonts.gstatic.com https://fonts.googleapis.com  https://cdn.jsdelivr.net; frame-src https://hibernate.atlassian.net"
  Header set X-Frame-Options DENY
  Header set X-Content-Type-Options nosniff
  Header set X-XSS-Protection "1; mode=block"
  Header set Referrer-Policy: strict-origin-when-cross-origin
  Header set Strict-Transport-Security: "max-age=15768000; includeSubDomains; preload"

  RewriteEngine On
  Include conf.d/hibernate.org-rewriterules.confpart
</VirtualHost>
</IfModule>
</IfFile>